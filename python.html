<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>byeung0x/python</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.8/brython.js" integrity="sha256-rA89wPrTJJQFWJaZveKW8jpdmC3t5F9rRkPyBjz8G04=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.8/brython_stdlib.js" integrity="sha256-Gnrw9tIjrsXcZSCh/wos5Jrpn0bNVNFJuNJI9d71TDs=" crossorigin="anonymous"></script>
</head>

    
<link rel="stylesheet" href="https://www.w3schools.com/w3css/3/w3.css">
<body>

<!-- Content will go here -->
  <h1>byeung0x Private Space</h1>
  
</body>
  
  <!-- Navigation -->
<nav class="w3-bar w3-black">
  <a href="/index.html" class="w3-button w3-bar-item">Home</a>
  <a href="#about" class="w3-button w3-bar-item">About</a>
  <a href="/python.html" class="w3-button w3-bar-item">Python Test</a>
  <a href="/contact.html" class="w3-button w3-bar-item">Contact</a>
</nav>
    
 
    
<body onload="brython()">
    <h1>Test 238</h1>

    <button id="get_price-btn">Get latest price</button>
    
    <table>
      <tr>
        <th>Coin</th>
        <th>Bid</th>
        <th>Ask</th>
      </tr>
      <tr>
        <td>Bitcoin</td>
        <td id="bid_btc"></td>
        <td id="ask_btc"></td>
      </tr>
      <tr>
        <td>Ether</td>
        <td id="bid_eth"></td>
        <td id="ask_eth"></td>
      </tr>
    </table>
    
    
    <!-- Ajax call -->
    <script type="text/python" id="script3">
        from browser import document, ajax
        import time
        

        def on_complete(req):
            import json
            data = json.loads(req.responseText)
            bid = data['Realtime Currency Exchange Rate']['8. Bid Price']
            ask = data['Realtime Currency Exchange Rate']['9. Ask Price']
            document['bid_btc'].text = bid
            document['ask_btc'].text = ask
            
        def get_price(e):
            req = ajax.ajax()
            coin = 'btc'
            url = 'https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=' + coin + '&to_currency=USD&apikey=B2V50BK9GE7VJU3O'
            req.open('GET', url, True)
            req.bind('complete', on_complete)
            document['bid_btc'].text = 'Loading...'
            document['ask_btc'].text = 'Loading...'

            document['ask_eth'].text = 'Loading...'

            req.send()
            
        document['get_price-btn'].bind('click', get_price)
    </script>

    
<script>
const userAction = async () => 
{
  const response = await fetch('https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=btc&to_currency=USD&apikey=B2V50BK9GE7VJU3O');
  const myJson = await response.json(); //extract JSON from the http response
  // do something with myJson
  document.getElementById("bid_eth").write = myJson['Realtime Currency Exchange Rate']['8. Bid Price'];
  document.getElementById("ask_eth").write = myJson['Realtime Currency Exchange Rate']['9. Ask Price'];
}





</body>
</html>


</script>
    
    
    </body>


</html> 
